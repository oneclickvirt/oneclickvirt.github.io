import{_ as i,c as a,o as t,ag as e}from"./chunks/framework.CSeR4K32.js";const p="/assets/vcr1.NRLOOynQ.jpg",l="/assets/vcr2.DC9j-Ib5.jpg",n="/assets/vcr3.Ea5Km6nQ.jpg",c="/assets/vcr4.B9DOiqQ8.jpg",r="/assets/vcr5.BajXu8XE.jpg",h="/assets/vcr6.CxN-b1o3.jpg",o="/assets/vcr7.D4aYKhIW.jpg",d="/assets/vcr8.ByRFpMlF.jpg",k="/assets/vcr9.B4apCqgi.jpg",g="/assets/vcr10.D8t6cQ5v.jpg",m="/assets/vcr11.Cz1VMbIx.jpg",v="/assets/vcr12.BNQe5j_u.jpg",b="/assets/vcr13.JV3PfcCZ.jpg",_="/assets/deadimage.BBBzAqkc.jpg",u="/assets/vcr14.Cjyr65Qp.jpg",F="/assets/resize.ppnxVOAW.jpg",q=JSON.parse('{"title":"","description":"","frontmatter":{"outline":"deep"},"headers":[],"relativePath":"incomplete/webvirtcloud_retspen.md","filePath":"incomplete/webvirtcloud_retspen.md","lastUpdated":1755493193000}'),C={name:"incomplete/webvirtcloud_retspen.md"};function y(B,s,E,w,f,x){return t(),a("div",null,s[0]||(s[0]=[e(`<h2 id="webvirtcloud-安装指南" tabindex="-1">WebVirtCloud 安装指南 <a class="header-anchor" href="#webvirtcloud-安装指南" aria-label="Permalink to &quot;WebVirtCloud 安装指南&quot;">​</a></h2><p><a href="https://hits.spiritlhl.net" target="_blank" rel="noreferrer"><img src="https://hits.spiritlhl.net/webvirtcloud.svg?action=hit&amp;title=hits&amp;title_bg=%23555555&amp;count_bg=%233aebee&amp;edge_flat=false" alt="hits"></a></p><p>仓库地址: <a href="https://github.com/oneclickvirt/webvirtcloud" target="_blank" rel="noreferrer">https://github.com/oneclickvirt/webvirtcloud</a></p><p>原项目对应仓库：<a href="https://github.com/oneclickvirt/webvirtcloud_retspen" target="_blank" rel="noreferrer">https://github.com/oneclickvirt/webvirtcloud_retspen</a></p><h2 id="控制节点和计算节点同时安装" tabindex="-1">控制节点和计算节点同时安装 <a class="header-anchor" href="#控制节点和计算节点同时安装" aria-label="Permalink to &quot;控制节点和计算节点同时安装&quot;">​</a></h2><ul><li>支持系统：Debian10+, Ubuntu18.04+, Centos8+, AlmaLinux8+, RockyLinux8+</li><li>推荐系统：Debian12+，Ubuntu22.04+</li><li>低版本系统会自动编译python新版本的安装包后再进行部署，所以推荐使用新系统不必编译直接安装</li></ul><p>国际</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">curl</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -slk</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> https://raw.githubusercontent.com/oneclickvirt/webvirtcloud/main/scripts/install_webvirt_cloud_retspen.sh</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -o</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install_webvirt_cloud_retspen.sh</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&amp;&amp; </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">chmod</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> +x</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install_webvirt_cloud_retspen.sh</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&amp;&amp; </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">bash</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install_webvirt_cloud_retspen.sh</span></span></code></pre></div><p>国内</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">curl</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -slk</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> https://cdn.spiritlhl.net/https://raw.githubusercontent.com/oneclickvirt/webvirtcloud/main/scripts/install_webvirt_cloud_retspen.sh</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -o</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install_webvirt_cloud_retspen.sh</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&amp;&amp; </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">chmod</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> +x</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install_webvirt_cloud_retspen.sh</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&amp;&amp; </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">bash</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install_webvirt_cloud_retspen.sh</span></span></code></pre></div><p>安装完成后打开公网IP地址，就能看到登录页面。</p><p>登录信息用户名和密码都是<code>admin</code>，记得登录后自行修改。</p><h2 id="开设linux虚拟机" tabindex="-1">开设Linux虚拟机 <a class="header-anchor" href="#开设linux虚拟机" aria-label="Permalink to &quot;开设Linux虚拟机&quot;">​</a></h2><p>进入控制面板后，修改完admin的密码后，需要自行设置计算节点。</p><p><img src="`+p+'" alt="vcr1"></p><p>选择<code>本地</code>类型，添加命名为local。</p><p><img src="'+l+'" alt="vcr2"></p><p>创建完成后，点击眼睛按钮，进入查看</p><p><img src="'+n+'" alt="vcr3"></p><p>在<code>存储</code>一栏中添加存储，选择<code>Dir</code>类型，添加名字叫<code>local</code>。如果你需要使用<code>ISO</code>类型的系统引导，那么需要创建ISO类型的存储，如果不需要的话跟着本指南走，就仅需要创建<code>Dir</code>类型。</p><p><img src="'+c+'" alt="vcr4"></p><p><img src="'+r+`" alt="vcr5"></p><p>创建完毕后，下载对应系统的qcow2文件，使用下面这个仓库的链接</p><p><a href="https://github.com/oneclickvirt/pve_kvm_images/releases/tag/images" target="_blank" rel="noreferrer">https://github.com/oneclickvirt/pve_kvm_images/releases/tag/images</a></p><p>示例中下载使用debian12的qcow2镜像使用</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">cd</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /var/lib/libvirt/images</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">wget</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> https://cdn.spiritlhl.net/https://github.com/oneclickvirt/pve_kvm_images/releases/download/images/debian12.qcow2</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">chmod</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 777</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> debian12.qcow2</span></span></code></pre></div><p>回到实例页面创建实例</p><p><img src="`+h+'" alt="vcr6"></p><p>计算节点选择<code>local</code></p><p><img src="'+o+'" alt="vcr7"></p><p>芯片组使用默认的就行，换不换都没问题</p><p><img src="'+d+'" alt="vcr8"></p><p>创建虚拟机可以使用预定义的配置大小，也可以自行使用自定义大小，看你的选择。</p><p><img src="'+k+'" alt="vcr9"></p><p>注意这块填写的实例名字不能和刚刚下载的镜像的文件名字重复，比如示例中就不能填写<code>debian12</code>。</p><p><img src="'+g+'" alt="vcr10"></p><p>创建成功后不能立即点击开机。</p><p><img src="'+m+'" alt="vcr11"></p><p>需要修改磁盘设置。</p><p><img src="'+v+'" alt="vcr12"></p><p>这块修改qcow2文件为<code>debian12.qcow2</code>，对应之前下载的qcow2的文件的名字，使用镜像。</p><p><img src="'+b+'" alt="vcr13"></p><p>修改确认后会在原来的计算节点的存储的<code>local</code>卷里看到有一个多余的盘，比如这里的<code>test.qcow2</code>，最好删除，避免占用磁盘</p><p><img src="'+_+'" alt="deadimage"></p><p>修改完成确认无误后，才可回到电源页面开机。</p><p><img src="'+u+'" alt="vcr14"></p><p>镜像的默认登录的用户名是<code>root</code>，密码是<code>password</code>或者是 <code>oneclickvirt</code>。</p><p>开机后，你会发现硬盘只有原始镜像的大小，此时需要调整硬盘大小，需要再次关机，此时能见到下图页面的按钮可用且硬盘大小也识别出来了。</p><p>没有经过首次开机，硬盘的大小是识别不出来的，识别不出来就不能进行修改，所以首次开关机是必须的。</p><p><img src="'+F+`" alt="resize"></p><p>修改后重启虚拟机，会发现有新的盘空间未分配，此时需要按照下面的方法扩容硬盘。</p><p>查看盘路径和剩余空白空间未分配的：</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">lsblk</span></span></code></pre></div><p>然后使用下述命令阔盘</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">fdisk</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /dev/vda</span></span></code></pre></div><p>按以下顺序操作：</p><p>输入<code>d</code>删除旧的分区（是的，需要删除旧的 vda1，数据不会丢失，因为后面不会格式化）。</p><p>输入<code>n</code>后回车新建一个分区。</p><p>类型选 primary（默认 p），直接回车就行</p><p>分区号同样选<code>1</code></p><p>起始位置必须和旧分区一样（默认是对的）按回车就行</p><p>显示是否需要擦除指纹，输入<code>Y</code>回车</p><p>结束位置直接按回车，使用全部剩余空间</p><p>输入<code>w</code>保存并退出。</p><p>此时再使用<code>lsblk</code>可确认新的空闲硬盘被分配成功了。</p><h2 id="缺点" tabindex="-1">缺点 <a class="header-anchor" href="#缺点" aria-label="Permalink to &quot;缺点&quot;">​</a></h2><p>网络还是没有自动配置，不如上一个项目智能，还得手动配置一下。</p><p>需要在已经开好的虚拟机的VNC中，登录后执行</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">systemctl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> enable</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> cloud-init</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">reboot</span></span></code></pre></div><p>手动启用配置为重启后自启动，然后重启服务器，就有网了。</p>`,70)]))}const D=i(C,[["render",y]]);export{q as __pageData,D as default};

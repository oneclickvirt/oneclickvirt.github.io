import{_ as s,v as a,b as l,R as n}from"./chunks/framework.70afa331.js";const h=JSON.parse('{"title":"仓库","description":"","frontmatter":{"outline":"deep"},"headers":[],"relativePath":"case/case2.md","filePath":"case/case2.md","lastUpdated":1747752093000}'),o={name:"case/case2.md"},p=n(`<h1 id="仓库" tabindex="-1">仓库 <a class="header-anchor" href="#仓库" aria-label="Permalink to &quot;仓库&quot;">​</a></h1><p><a href="https://github.com/spiritLHLS/one-click-installation-script" target="_blank" rel="noreferrer">https://github.com/spiritLHLS/one-click-installation-script</a></p><p><a href="https://hits.spiritlhl.net" target="_blank" rel="noreferrer"><img src="https://hits.spiritlhl.net/one-click-installation-script.svg?action=hit&amp;title=Hits&amp;title_bg=%23555555&amp;count_bg=%230eecf8&amp;edge_flat=false" alt="Hits"></a></p><p>所有脚本如需在国内服务器使用，请在链接前加上<code>https://ghproxy.com/</code>确保命令可以下载本仓库的shell脚本执行</p><h2 id="一键修复脚本" tabindex="-1">一键修复脚本 <a class="header-anchor" href="#一键修复脚本" aria-label="Permalink to &quot;一键修复脚本&quot;">​</a></h2><p>运行所有一键修复脚本前注意看说明，以及保证服务器无重要数据，运行后造成的一切后果作者不负任何责任，自行评判风险！</p><h3 id="一键尝试修复apt源" tabindex="-1">一键尝试修复apt源 <a class="header-anchor" href="#一键尝试修复apt源" aria-label="Permalink to &quot;一键尝试修复apt源&quot;">​</a></h3><ul><li>支持系统：Ubuntu 12+，Debian 6+</li><li>修复apt下载包进程意外退出导致的源锁死</li><li>修复apt源broken损坏</li><li>修复apt源多进程占用锁死</li><li>修复apt源公钥缺失</li><li>修复替换系统可用的apt源列表，国内用阿里源，国外用官方源</li><li>修复本机的Ubuntu系统是EOL非长期维护的版本(奇数或陈旧的偶数版本)，将替换为Ubuntu官方的old-releases仓库以支持apt的使用</li><li>修复只保证<code>apt update</code>不会报错，其他命令报错未修复</li><li>如若修复后install还有问题，重启服务器解决问题</li></ul><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">curl</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-L</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">https://raw.githubusercontent.com/spiritLHLS/one-click-installation-script/main/repair_scripts/package.sh</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-o</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">package.sh</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&amp;&amp;</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">chmod</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">+x</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">package.sh</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&amp;&amp;</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">bash</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">package.sh</span></span></code></pre></div><h3 id="一键尝试修复系统时间" tabindex="-1">一键尝试修复系统时间 <a class="header-anchor" href="#一键尝试修复系统时间" aria-label="Permalink to &quot;一键尝试修复系统时间&quot;">​</a></h3><ul><li>支持系统：Ubuntu 18+，Debian 8+，centos 7+，Fedora，Almalinux 8.5+</li><li>由于系统时间不准确都是未进行时区时间同步造成的，使用chronyd进行时区时间同步后应当解决了问题</li></ul><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">curl</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-L</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">https://raw.githubusercontent.com/spiritLHLS/one-click-installation-script/main/repair_scripts/modify_time.sh</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-o</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">modify_time.sh</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&amp;&amp;</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">chmod</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">+x</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">modify_time.sh</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&amp;&amp;</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">bash</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">modify_time.sh</span></span></code></pre></div><h3 id="一键尝试修复sudo警告" tabindex="-1">一键尝试修复sudo警告 <a class="header-anchor" href="#一键尝试修复sudo警告" aria-label="Permalink to &quot;一键尝试修复sudo警告&quot;">​</a></h3><ul><li>一键尝试修复<code>sudo: unable to resolve host xxx: Name or service not known</code>警告(爆错)</li></ul><p>不要在生产环境上使用该脚本，否则容易造成网络hosts配置错误，配置的host名字不在外网IP上反而在内网IP(127.0.0.1)上</p><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">curl</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-L</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">https://raw.githubusercontent.com/spiritLHLS/one-click-installation-script/main/repair_scripts/check_sudo.sh</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-o</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">check_sudo.sh</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&amp;&amp;</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">chmod</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">+x</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">check_sudo.sh</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&amp;&amp;</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">bash</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">check_sudo.sh</span></span></code></pre></div><h3 id="一键修改系统自带的journal日志记录大小释放系统盘空间" tabindex="-1">一键修改系统自带的journal日志记录大小释放系统盘空间 <a class="header-anchor" href="#一键修改系统自带的journal日志记录大小释放系统盘空间" aria-label="Permalink to &quot;一键修改系统自带的journal日志记录大小释放系统盘空间&quot;">​</a></h3><ul><li>支持系统：Ubuntu 18+，Debian 8+，centos 7+，Fedora，Almalinux 8.5+</li><li>1.自定义修改大小，单位为MB，一般500或者1000即可，有的系统日志默认给了5000甚至更多，不是做站啥的没必要 <ul><li>请注意，修改journal目录大小会影响系统日志的记录，因此，在修改journal目录大小之前如果需要之前的日志，建议先备份系统日志到本地</li></ul></li><li>2.自定义修改设置系统日志保留日期时长，超过日期时长的日志将被清除</li><li>3.默认修改日志只记录warning等级(无法自定义)</li><li>4.以后日志的产生将受到日志文件大小，日志保留时间，日志保留等级的限制</li></ul><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">curl</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-L</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">https://raw.githubusercontent.com/spiritLHLS/one-click-installation-script/main/repair_scripts/resize_journal.sh</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-o</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">resize_journal.sh</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&amp;&amp;</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">chmod</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">+x</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">resize_journal.sh</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&amp;&amp;</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">bash</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">resize_journal.sh</span></span></code></pre></div><h3 id="一键尝试修复网络" tabindex="-1">一键尝试修复网络 <a class="header-anchor" href="#一键尝试修复网络" aria-label="Permalink to &quot;一键尝试修复网络&quot;">​</a></h3><p><strong>该脚本轻易勿要使用，请确保运行时服务器无重要文件或程序，出现运行bug后续可能需要重装系统</strong></p><p><strong>一定要在screen中执行该脚本，否则可能导致修改过程中ssh断链接而修改失败卡住最终SSH无法连接！不在screen中执行后果自负！</strong></p><ul><li>支持系统：Ubuntu 18+，Debian 8+，centos 7+，Fedora，Almalinux 8.5+</li><li>尝试修复nameserver为google源或cloudflare源</li><li>尝试修复为IP类型对应的网络优先级(默认IPV4类型，纯V6类型再替换为IPV6类型)</li></ul><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">curl</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-L</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">https://cdn.spiritlhl.workers.dev/https://raw.githubusercontent.com/spiritLHLS/one-click-installation-script/main/repair_scripts/network.sh</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-o</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">network.sh</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&amp;&amp;</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">chmod</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">+x</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">network.sh</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&amp;&amp;</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">bash</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">network.sh</span></span></code></pre></div><p>如果是纯V6的也可以不使用上面脚本的nat64，使用warp添加V4网络</p><p>比如：<a href="https://github.com/fscarmen/warp" target="_blank" rel="noreferrer">https://github.com/fscarmen/warp</a></p><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">wget</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-N</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">https://raw.githubusercontent.com/fscarmen/warp/main/menu.sh</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&amp;&amp;</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">bash</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">menu.sh</span><span style="color:#A6ACCD;"> [option] </span><span style="color:#89DDFF;">[</span><span style="color:#A6ACCD;">lisence</span><span style="color:#89DDFF;">]</span></span></code></pre></div><p>非纯V6的，带V4切换优先级到IPV4可用以下命令</p><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">sudo</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">sed</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-i</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">s/.*precedence ::ffff:0:0\\/96.*/precedence ::ffff:0:0\\/96  100/g</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">/etc/gai.conf</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&amp;&amp;</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">sudo</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">systemctl</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">restart</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">networking</span></span></code></pre></div><h2 id="一键环境安装脚本" tabindex="-1">一键环境安装脚本 <a class="header-anchor" href="#一键环境安装脚本" aria-label="Permalink to &quot;一键环境安装脚本&quot;">​</a></h2><p>只推荐在新服务器上安装，环境不纯净不保证不出bug</p><p>运行所有一键环境安装脚本前注意看说明，以及保证服务器无重要数据，运行后造成的一切后果作者不负任何责任，自行评判风险！</p><h3 id="一键安装jupyter环境" tabindex="-1">一键安装jupyter环境 <a class="header-anchor" href="#一键安装jupyter环境" aria-label="Permalink to &quot;一键安装jupyter环境&quot;">​</a></h3><ul><li><strong>本脚本尝试使用Miniconda3安装虚拟环境jupyter-env再进行jupyter和jupyterlab的安装，如若安装机器不纯净勿要轻易使用本脚本！</strong></li><li><strong>本脚本为实验性脚本可能会有各种bug，勿要轻易尝试！</strong></li><li>验证已支持的系统： <ul><li>Ubuntu 系 - 推荐，脚本自动挂起到后台</li><li>Debian 系 - 部分可能需要手动挂起到后台，详看脚本运行安装完毕的后续提示</li></ul></li><li>可能支持的系统(未验证)：centos 7+，Fedora，Almalinux 8.5+</li><li>执行脚本，之前有用本脚本安装过则直接打印设置的登陆信息，没安装过则进行安装再打印信息，如果已安装但未启动则自动启动后再打印信息</li><li>如果是初次安装无脑输入y回车即可，按照提示进行操作即可，安装完毕将在后台常驻运行，自动添加常用的安装包通道源</li><li>安装完毕后，如果需要在lab中安装第三方库需要在lab中使用terminal并使用conda进行下载而不是pip3下载，这是需要注意的一点</li><li>安装过程中有判断是否为中国IP，可选择是否使用中国镜像</li></ul><p>原始用途是方便快捷的在按小时计费的超大型服务器上部署python环境进行科学计算，充分利用时间别浪费在构建环境上。</p><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">curl</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-L</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">https://raw.githubusercontent.com/spiritLHLS/one-click-installation-script/main/install_scripts/jupyter.sh</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-o</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">jupyter.sh</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&amp;&amp;</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">chmod</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">+x</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">jupyter.sh</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&amp;&amp;</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">bash</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">jupyter.sh</span></span></code></pre></div><h3 id="一键安装r语言环境" tabindex="-1">一键安装R语言环境 <a class="header-anchor" href="#一键安装r语言环境" aria-label="Permalink to &quot;一键安装R语言环境&quot;">​</a></h3><ul><li><strong>安装前需使用Miniconda3安装虚拟环境jupyter-env，然后进行jupyter和jupyterlab的安装，再然后才能安装本内核</strong></li><li><strong>简单的说，需要执行本仓库对应的jupyter安装脚本再运行本脚本安装R语言环境，会自动安装R环境内核和图形设备支持库</strong></li><li>x11可能需要手动启动一下，执行<code>sudo /usr/bin/Xorg</code></li><li>可能支持的系统(未验证)：centos 7+，Fedora，Almalinux 8.5+</li></ul><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">curl</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-L</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">https://raw.githubusercontent.com/spiritLHLS/one-click-installation-script/main/install_scripts/R.sh</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-o</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">R.sh</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&amp;&amp;</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">chmod</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">+x</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">R.sh</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&amp;&amp;</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">bash</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">R.sh</span></span></code></pre></div><h3 id="一键安装rust环境" tabindex="-1">一键安装rust环境 <a class="header-anchor" href="#一键安装rust环境" aria-label="Permalink to &quot;一键安装rust环境&quot;">​</a></h3><ul><li>支持系统：Ubuntu 18+，Debian 8+，centos 7+，Fedora，Almalinux 8.5+</li><li>加载官方脚本安装，前置条件适配系统以及后置条件判断安装的版本</li></ul><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">curl</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-L</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">https://raw.githubusercontent.com/spiritLHLS/one-click-installation-script/main/install_scripts/rust.sh</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-o</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">rust.sh</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&amp;&amp;</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">chmod</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">+x</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">rust.sh</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&amp;&amp;</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">bash</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">rust.sh</span></span></code></pre></div><h3 id="一键安装c环境" tabindex="-1">一键安装C环境 <a class="header-anchor" href="#一键安装c环境" aria-label="Permalink to &quot;一键安装C环境&quot;">​</a></h3><ul><li>一键安装C++环境</li><li>支持系统：使用apt或者yum作为包管理器的系统</li><li>如果未安装则安装，如果有安装则提示升级</li></ul><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">curl</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-L</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">https://raw.githubusercontent.com/spiritLHLS/one-click-installation-script/main/install_scripts/cplusplus.sh</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-o</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">cplusplus.sh</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&amp;&amp;</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">chmod</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">+x</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">cplusplus.sh</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&amp;&amp;</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">bash</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">cplusplus.sh</span></span></code></pre></div><h3 id="一键安装vnstat环境" tabindex="-1">一键安装vnstat环境 <a class="header-anchor" href="#一键安装vnstat环境" aria-label="Permalink to &quot;一键安装vnstat环境&quot;">​</a></h3><ul><li>支持系统：Ubuntu 18+，Debian 8+，centos 7+，Fedora，Almalinux 8.5+</li><li>加载官方文件编译安装，前置条件适配系统以及后置条件判断安装的版本</li></ul><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">curl</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-L</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">https://raw.githubusercontent.com/spiritLHLS/one-click-installation-script/main/install_scripts/vnstat.sh</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-o</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">vnstat.sh</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&amp;&amp;</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">chmod</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">+x</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">vnstat.sh</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&amp;&amp;</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">bash</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">vnstat.sh</span></span></code></pre></div><h3 id="一键升级低版本debian为debian11" tabindex="-1">一键升级低版本debian为debian11 <a class="header-anchor" href="#一键升级低版本debian为debian11" aria-label="Permalink to &quot;一键升级低版本debian为debian11&quot;">​</a></h3><ul><li>支持系统：debian 6+</li><li>升级后需要重启系统加载内核，升级过程中需要选择的都无脑按回车即可</li><li>升级是一个版本迭代一个版本，所以如果版本低，每执行一次升级一个版本，直至升级到debian11</li></ul><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">curl</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-L</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">https://raw.githubusercontent.com/spiritLHLS/one-click-installation-script/main/install_scripts/todebian11.sh</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-o</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">todebian11.sh</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&amp;&amp;</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">chmod</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">+x</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">todebian11.sh</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&amp;&amp;</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">bash</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">todebian11.sh</span></span></code></pre></div><h3 id="一键升级低版本ubuntu为ubuntu22" tabindex="-1">一键升级低版本ubuntu为ubuntu22 <a class="header-anchor" href="#一键升级低版本ubuntu为ubuntu22" aria-label="Permalink to &quot;一键升级低版本ubuntu为ubuntu22&quot;">​</a></h3><ul><li>支持系统：Ubuntu 16+</li><li>升级后需要重启系统加载内核，升级过程中需要选择的都无脑按回车即可</li><li>升级是一个版本迭代一个版本，所以如果版本低，每执行一次升级一个版本，直至升级到ubuntu22</li></ul><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">curl</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-L</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">https://raw.githubusercontent.com/spiritLHLS/one-click-installation-script/main/install_scripts/toubuntu22.sh</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-o</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">toubuntu22.sh</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&amp;&amp;</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">chmod</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">+x</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">toubuntu22.sh</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&amp;&amp;</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">bash</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">toubuntu22.sh</span></span></code></pre></div><h3 id="一键安装zipline平台" tabindex="-1">一键安装zipline平台 <a class="header-anchor" href="#一键安装zipline平台" aria-label="Permalink to &quot;一键安装zipline平台&quot;">​</a></h3><ul><li>应该支持的系统：Ubuntu 18+，Debian 8+，centos 7+，Fedora，Almalinux 8.5+</li><li>暂时只在Ubuntu上验证无问题</li><li>如若要设置反向代理绑定域名，安装前请保证原服务器未安装过nginx，如若已安装过nginx，请自行配置反向代理本机的3000端口</li><li>默认一路回车是不启用反代不安装nginx的，自行选择，如需通过本脚本配置反代系统一定要未安装过nginx并在填写y或Y开启安装</li><li><a href="https://github.com/diced/zipline" target="_blank" rel="noreferrer">zipline</a> 平台功能: ShareX，自定义短链接，文件上传分享，多用户校验，高亮显示，阅后即焚，设置简单 (含pastebin)</li><li>自动安装docker，docker-compose，如若已安装zipline在/root目录下，则自动更新</li><li>反向代理如若已设置成功，还需要在面板设置中填写域名，绑定启用</li></ul><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">curl</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-L</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">https://raw.githubusercontent.com/spiritLHLS/one-click-installation-script/main/install_scripts/zipline.sh</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-o</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">zipline.sh</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&amp;&amp;</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">chmod</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">+x</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">zipline.sh</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&amp;&amp;</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">bash</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">zipline.sh</span></span></code></pre></div><p>如果需要删除0字节文件，打开<code>/root/zipline</code>文件夹，执行</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">docker-compose exec zipline yarn scripts:clear-zero-byte</span></span></code></pre></div><p>按照提示操作</p><h3 id="一键安装filebrowser平台" tabindex="-1">一键安装filebrowser平台 <a class="header-anchor" href="#一键安装filebrowser平台" aria-label="Permalink to &quot;一键安装filebrowser平台&quot;">​</a></h3><ul><li>端口设置为3030了，其他登陆信息详见提示</li><li><a href="https://github.com/filebrowser/filebrowser" target="_blank" rel="noreferrer">filebrowser</a>平台支持下载上传文件到服务器，批量下载多个文件(自定义压缩格式)，构建文件分享链接，设置分享时长</li><li>如果本地有启用IPV6优先级可能绑定到V6去了，使用<code>lsof -i:3030</code>查看绑定情况，切换优先级后再安装就正常了</li></ul><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">curl</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-L</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">https://raw.githubusercontent.com/spiritLHLS/one-click-installation-script/main/install_scripts/filebrowser.sh</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-o</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">filebrowser.sh</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&amp;&amp;</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">chmod</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">+x</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">filebrowser.sh</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&amp;&amp;</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">bash</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">filebrowser.sh</span></span></code></pre></div><h3 id="一键删除平台监控" tabindex="-1">一键删除平台监控 <a class="header-anchor" href="#一键删除平台监控" aria-label="Permalink to &quot;一键删除平台监控&quot;">​</a></h3><ul><li>一键移除大多数云服务器监控</li><li>涵盖阿里云、腾讯云、华为云、UCLOUD、甲骨文云、京东云</li></ul><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">curl</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-L</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">https://raw.githubusercontent.com/spiritLHLS/one-click-installation-script/main/install_scripts/dlm.sh</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-o</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">dlm.sh</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&amp;&amp;</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">chmod</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">+x</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">dlm.shh</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&amp;&amp;</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">bash</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">dlm.sh</span></span></code></pre></div><h2 id="部分手动命令" tabindex="-1">部分手动命令 <a class="header-anchor" href="#部分手动命令" aria-label="Permalink to &quot;部分手动命令&quot;">​</a></h2><h3 id="一键开启root登陆并替换密码" tabindex="-1">一键开启root登陆并替换密码 <a class="header-anchor" href="#一键开启root登陆并替换密码" aria-label="Permalink to &quot;一键开启root登陆并替换密码&quot;">​</a></h3><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">bash &lt;(curl -sSL https://raw.githubusercontent.com/fscarmen/tools/main/root.sh) [PASSWORD]</span></span></code></pre></div><h3 id="一键屏蔽邮件端口避免被恶意程序使用" tabindex="-1">一键屏蔽邮件端口避免被恶意程序使用 <a class="header-anchor" href="#一键屏蔽邮件端口避免被恶意程序使用" aria-label="Permalink to &quot;一键屏蔽邮件端口避免被恶意程序使用&quot;">​</a></h3><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">iptables</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-A</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">INPUT</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-p</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">tcp</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">--dport</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">25</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-j</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">DROP</span></span>
<span class="line"><span style="color:#FFCB6B;">iptables</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-A</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">OUTPUT</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-p</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">tcp</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">--dport</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">25</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-j</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">DROP</span></span>
<span class="line"><span style="color:#FFCB6B;">/sbin/iptables-save</span></span></code></pre></div><h3 id="设置语言包" tabindex="-1">设置语言包 <a class="header-anchor" href="#设置语言包" aria-label="Permalink to &quot;设置语言包&quot;">​</a></h3><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">sudo</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">apt-get</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">update</span></span>
<span class="line"><span style="color:#FFCB6B;">sudo</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">apt-get</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">install</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">language-pack-en-base</span></span>
<span class="line"><span style="color:#FFCB6B;">sudo</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">locale-gen</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">en_US.UTF-8</span></span></code></pre></div><p>下载UTF-8的环境，生成UTF-8的包，然后重启服务器</p><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">locale</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-a</span></span>
<span class="line"><span style="color:#C792EA;">export</span><span style="color:#A6ACCD;"> LC_ALL</span><span style="color:#89DDFF;">=</span><span style="color:#C3E88D;">en_US.UTF-8</span></span></code></pre></div><p>查看并设置语言包</p><p>language-pack-en-base 在debian中好像没有，只有Ubuntu有好像，不知道是不是个例，有问题再说</p><h3 id="ubuntu更新源被锁" tabindex="-1">ubuntu更新源被锁 <a class="header-anchor" href="#ubuntu更新源被锁" aria-label="Permalink to &quot;ubuntu更新源被锁&quot;">​</a></h3><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">sudo</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">rm</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-rf</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">/var/cache/apt/archives/lock</span></span>
<span class="line"><span style="color:#FFCB6B;">sudo</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">pkill</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">apt</span></span>
<span class="line"><span style="color:#FFCB6B;">sudo</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">rm</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">/var/lib/dpkg/lock-frontend</span></span>
<span class="line"><span style="color:#FFCB6B;">sudo</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">rm</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">/var/lib/apt/lists/lock</span></span>
<span class="line"><span style="color:#FFCB6B;">sudo</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">rm</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">/var/cache/apt/archives/lock</span></span>
<span class="line"><span style="color:#FFCB6B;">sudo</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">rm</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">/var/lib/dpkg/lock</span></span>
<span class="line"><span style="color:#FFCB6B;">sudo</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">dpkg</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">--configure</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-a</span></span></code></pre></div><p>然后重启系统</p><h3 id="debian缺失公钥" tabindex="-1">debian缺失公钥 <a class="header-anchor" href="#debian缺失公钥" aria-label="Permalink to &quot;debian缺失公钥&quot;">​</a></h3><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">apt-get</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">install</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">debian-keyring</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">debian-archive-keyring</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-y</span></span></code></pre></div><h3 id="ubuntu或debian缺失公钥" tabindex="-1">ubuntu或debian缺失公钥 <a class="header-anchor" href="#ubuntu或debian缺失公钥" aria-label="Permalink to &quot;ubuntu或debian缺失公钥&quot;">​</a></h3><p>后续这块有计划整理为一个一键脚本</p><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">sudo</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">apt-key</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">adv</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">--keyserver</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">keyserver.ubuntu.com</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">--recv-keys</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">公钥</span></span></code></pre></div><h3 id="centos换源" tabindex="-1">centos换源 <a class="header-anchor" href="#centos换源" aria-label="Permalink to &quot;centos换源&quot;">​</a></h3><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">sudo</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">cp</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">/etc/yum.repos.d/CentOS-Base.repo</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">/etc/yum.repos.d/CentOS-Base.repo.backup</span></span>
<span class="line"><span style="color:#FFCB6B;">sudo</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">sed</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-i</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">s/^mirrorlist=http/mirrorlist=https/</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">/etc/yum.repos.d/CentOS-Base.repo</span></span></code></pre></div><h3 id="安装gitea" tabindex="-1">安装gitea <a class="header-anchor" href="#安装gitea" aria-label="Permalink to &quot;安装gitea&quot;">​</a></h3><p>Ubuntu 20无问题，Ubuntu 22好像不行</p><p><a href="https://gitlab.com/packaging/gitea" target="_blank" rel="noreferrer">https://gitlab.com/packaging/gitea</a></p><h3 id="卸载aapanel" tabindex="-1">卸载aapanel <a class="header-anchor" href="#卸载aapanel" aria-label="Permalink to &quot;卸载aapanel&quot;">​</a></h3><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">apt</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">install</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">sysv-rc-conf</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-y</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&amp;&amp;</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">service</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">bt</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">stop</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&amp;&amp;</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">sysv-rc-conf</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">bt</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">off</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&amp;&amp;</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">rm</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-f</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">/etc/init.d/bt</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&amp;&amp;</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">rm</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-rf</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">/www/server/panel</span></span></code></pre></div><h3 id="安装docker和docker-compose" tabindex="-1">安装docker和docker-compose <a class="header-anchor" href="#安装docker和docker-compose" aria-label="Permalink to &quot;安装docker和docker-compose&quot;">​</a></h3><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">curl</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-sSL</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">https://get.docker.com/</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">|</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">sh</span></span>
<span class="line"><span style="color:#FFCB6B;">curl</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-L</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">https://github.com/docker/compose/releases/latest/download/docker-compose-linux-</span><span style="color:#89DDFF;">$(</span><span style="color:#FFCB6B;">uname</span><span style="color:#C3E88D;"> -m</span><span style="color:#89DDFF;">)&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-o</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">/usr/local/bin/docker-compose</span></span>
<span class="line"><span style="color:#FFCB6B;">chmod</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">+x</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">/usr/local/bin/docker-compose</span></span>
<span class="line"><span style="color:#FFCB6B;">docker-compose</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">--version</span></span></code></pre></div><p>卸载所有docker镜像和容器</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">docker rm -f $(docker ps -aq); docker rmi $(docker images -aq)</span></span></code></pre></div><h3 id="通过docker安装code-server" tabindex="-1">通过docker安装code-server <a class="header-anchor" href="#通过docker安装code-server" aria-label="Permalink to &quot;通过docker安装code-server&quot;">​</a></h3><p>安装</p><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">mkdir</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-p</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">~/.config</span></span>
<span class="line"><span style="color:#FFCB6B;">docker</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">run</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">--restart=always</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">--name</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">code-server</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-p</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0.0</span><span style="color:#C3E88D;">.0.0:8886:8080</span><span style="color:#A6ACCD;"> \\</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#C3E88D;">-v</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">$HOME</span><span style="color:#C3E88D;">/.config:/home/coder/.config</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> \\</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#C3E88D;">-v</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">$PWD</span><span style="color:#C3E88D;">:/home/coder/project</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> \\</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#C3E88D;">-u</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;$(</span><span style="color:#FFCB6B;">id</span><span style="color:#C3E88D;"> -u</span><span style="color:#89DDFF;">)</span><span style="color:#C3E88D;">:</span><span style="color:#89DDFF;">$(</span><span style="color:#FFCB6B;">id</span><span style="color:#C3E88D;"> -g</span><span style="color:#89DDFF;">)&quot;</span><span style="color:#A6ACCD;"> \\</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#C3E88D;">-e</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">DOCKER_USER=</span><span style="color:#A6ACCD;">$USER</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> \\</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#C3E88D;">codercom/code-server:latest</span></span></code></pre></div><p>新窗口</p><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">docker</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">exec</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">code-server</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">cat</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">/root/.config/code-server/config.yaml</span></span></code></pre></div><p>或</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">curl -fsSL https://code-server.dev/install.sh | sh -s -- --dry-run</span></span>
<span class="line"><span style="color:#A6ACCD;">sudo systemctl enable --now code-server@root</span></span>
<span class="line"><span style="color:#A6ACCD;">sed -i &#39;1s/127.0.0.1:8080/0.0.0.0:8536/&#39; ~/.config/code-server/config.yaml</span></span>
<span class="line"><span style="color:#A6ACCD;">sudo systemctl restart code-server@root</span></span>
<span class="line"><span style="color:#A6ACCD;">cat .config/code-server/config.yaml</span></span></code></pre></div><p>卸载需要</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">sudo systemctl stop code-server@root</span></span>
<span class="line"><span style="color:#A6ACCD;">sudo systemctl disable code-server@root</span></span>
<span class="line"><span style="color:#A6ACCD;">rm -rf ~/.cache/coder</span></span>
<span class="line"><span style="color:#A6ACCD;">sudo apt remove coder -y</span></span></code></pre></div><p>或</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">curl -fsSL https://code-server.dev/install.sh | sh -s -- --dry-run</span></span>
<span class="line"><span style="color:#A6ACCD;">sudo systemctl enable --now code-server@root</span></span>
<span class="line"><span style="color:#A6ACCD;">sed -i &#39;1s/127.0.0.1:8080/0.0.0.0:8536/&#39; ~/.config/code-server/config.yaml</span></span>
<span class="line"><span style="color:#A6ACCD;">sudo systemctl restart code-server@root</span></span>
<span class="line"><span style="color:#A6ACCD;">cat .config/code-server/config.yaml</span></span></code></pre></div><p>卸载需要</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">sudo systemctl stop code-server@root</span></span>
<span class="line"><span style="color:#A6ACCD;">sudo systemctl disable code-server@root</span></span>
<span class="line"><span style="color:#A6ACCD;">rm -rf ~/.cache/coder</span></span>
<span class="line"><span style="color:#A6ACCD;">sudo apt remove coder -y</span></span></code></pre></div>`,109),e=[p];function t(c,r,C,i,y,D){return a(),l("div",null,e)}const u=s(o,[["render",t]]);export{h as __pageData,u as default};

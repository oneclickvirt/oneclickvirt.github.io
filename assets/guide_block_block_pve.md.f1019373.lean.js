import{_ as s,v as e,b as a,R as t}from"./chunks/framework.70afa331.js";const _=JSON.parse('{"title":"通过设置防火墙限制虚拟机使用的IP避免盗用","description":"","frontmatter":{"outline":"deep"},"headers":[],"relativePath":"guide/block/block_pve.md","filePath":"guide/block/block_pve.md","lastUpdated":1731313536000}'),l={name:"guide/block/block_pve.md"},o=t(`<h1 id="通过设置防火墙限制虚拟机使用的ip避免盗用" tabindex="-1">通过设置防火墙限制虚拟机使用的IP避免盗用 <a class="header-anchor" href="#通过设置防火墙限制虚拟机使用的ip避免盗用" aria-label="Permalink to &quot;通过设置防火墙限制虚拟机使用的IP避免盗用&quot;">​</a></h1><p>在PVE的宿主机下创建以下文件</p><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">/etc/pve/firewall/&lt;VMID&gt;.fw</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">[</span><span style="color:#A6ACCD;">IPSET ipfilter-</span><span style="color:#89DDFF;">&lt;</span><span style="color:#A6ACCD;">net0</span><span style="color:#89DDFF;">&gt;]</span></span>
<span class="line"><span style="color:#FFCB6B;">xxx.xxx.xxx.xxx</span></span></code></pre></div><p><code>&lt;VMID&gt;</code>替换为虚拟机的VMID数字，<code>&lt;net0&gt;</code>替换为网络设备中对应的别名(一般不用修改，除非你限制的IPV6)，<code>xxx.xxx.xxx.xxx</code>替换为公网IP地址，注意此IP对应前面的网络设备。</p><p>这里的意思是net0只能使用xxx.xxx.xxx.xxx这个IP，如果使用其他的IP数据将会被丢弃，从而达到限制虚拟机只能使用此IP的目的。</p><p>这里可以有多个IP，一旦启用此规则该VM就无法使用除此之外的任何IP，如果你没有写IPv6地址则代表该VM无法使用IPv6地址。</p><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>本设置仅推荐在开设<strong>非NAT全端口映射的独立IP的虚拟机</strong>时使用，否则可能导致奇奇怪怪的问题造成服务器没网。</p></div><p>该方法<strong>不适合</strong>开设任何NAT虚拟机/容器的PVE上使用。</p>`,8),p=[o];function n(c,i,x,r,d,P){return e(),a("div",null,p)}const g=s(l,[["render",n]]);export{_ as __pageData,g as default};

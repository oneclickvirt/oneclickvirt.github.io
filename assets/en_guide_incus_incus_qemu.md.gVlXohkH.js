import{_ as i,c as e,o as a,ag as t}from"./chunks/framework.CSeR4K32.js";const k=JSON.parse('{"title":"Running QEMU Virtualized Linux Virtual Machines in Incus","description":"","frontmatter":{"outline":"deep"},"headers":[],"relativePath":"en/guide/incus/incus_qemu.md","filePath":"en/guide/incus/incus_qemu.md","lastUpdated":1761269824000}'),n={name:"en/guide/incus/incus_qemu.md"};function l(r,s,h,d,p,o){return a(),e("div",null,s[0]||(s[0]=[t(`<h1 id="running-qemu-virtualized-linux-virtual-machines-in-incus" tabindex="-1">Running QEMU Virtualized Linux Virtual Machines in Incus <a class="header-anchor" href="#running-qemu-virtualized-linux-virtual-machines-in-incus" aria-label="Permalink to &quot;Running QEMU Virtualized Linux Virtual Machines in Incus&quot;">​</a></h1><h2 id="available-images-for-qemu-virtual-machines" tabindex="-1">Available Images for QEMU Virtual Machines <a class="header-anchor" href="#available-images-for-qemu-virtual-machines" aria-label="Permalink to &quot;Available Images for QEMU Virtual Machines&quot;">​</a></h2><p>Here are some of the available system parameters for your reference:</p><ul><li>debian10, debian11, debian12, debian13</li><li>ubuntu18, ubuntu20, ubuntu22</li><li>centos8, centos9 (actually deployed as Stream versions)</li><li>alpine3.15, alpine3.16, alpine3.17, alpine3.18</li><li>openwrt21, openwrt22, fedora37, fedora38, fedora39</li><li>rockylinux8, rockylinux9, oracle8, oracle9</li><li>oracle7, centos7 (all require enabling CGroupV1 in GRUB, otherwise they won&#39;t start - see FAQ for details)</li><li>kali, archlinux</li></ul><ul><li>Note that all are combinations of <strong>lowercase letters + numbers</strong> or <strong>lowercase letters only</strong>. Try them yourself - if the system is not found in the search, the script will automatically exit.</li><li>Version numbers can include English decimal points to accommodate Alpine version numbers.</li><li>Systems that fail to start may be due to insufficient disk space, memory, or incompatibility with the host machine. Check the error messages for systems that won&#39;t start.</li><li>Currently, only <a href="https://github.com/oneclickvirt/incus_images" target="_blank" rel="noreferrer">self-compiled</a> images are used for virtual machine systems. Non-self-compiled images lack dependencies and configurations and cannot be used.</li><li>Complete list of supported systems for self-compiled images: <a href="https://github.com/oneclickvirt/incus_images/releases/tag/kvm_images" target="_blank" rel="noreferrer">kvm_images</a></li></ul><h2 id="creating-a-single-nat-server" tabindex="-1">Creating a Single NAT Server <a class="header-anchor" href="#creating-a-single-nat-server" aria-label="Permalink to &quot;Creating a Single NAT Server&quot;">​</a></h2><ul><li>Create only one NAT server with customizable limitations for all content</li></ul><h3 id="download-script" tabindex="-1">Download Script <a class="header-anchor" href="#download-script" aria-label="Permalink to &quot;Download Script&quot;">​</a></h3><p>International:</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">curl</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -L</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> https://raw.githubusercontent.com/oneclickvirt/incus/main/scripts/buildvm.sh</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -o</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> buildvm.sh</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> &amp;&amp; </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">chmod</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> +x</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> buildvm.sh</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> &amp;&amp; </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">dos2unix</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> buildvm.sh</span></span></code></pre></div><p>Domestic (China):</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">curl</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -L</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> https://cdn.spiritlhl.net/https://raw.githubusercontent.com/oneclickvirt/incus/main/scripts/buildvm.sh</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -o</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> buildvm.sh</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> &amp;&amp; </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">chmod</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> +x</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> buildvm.sh</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> &amp;&amp; </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">dos2unix</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> buildvm.sh</span></span></code></pre></div><h3 id="usage" tabindex="-1">Usage <a class="header-anchor" href="#usage" aria-label="Permalink to &quot;Usage&quot;">​</a></h3><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>./buildvm.sh ServerName CPUCores MemorySize DiskSize SSHPort ExternalStartPort ExternalEndPort DownloadSpeed UploadSpeed EnableIPV6(Y or N) System(leave empty for debian11)</span></span></code></pre></div><p>CPU cores must be less than or equal to the host machine&#39;s cores. Memory size is calculated in MB, disk size in GB, download and upload speeds in Mbit. EnableIPV6 doesn&#39;t necessarily need to be Y or N - it can be omitted, defaulting to disabled IPV6.</p><p>If both <code>ExternalStartPort</code> and <code>ExternalEndPort</code> are set to 0, no external port range mapping will be performed - only the basic SSH port will be mapped. Note that these <code>cannot be empty</code> - set them to 0 if no mapping is needed.</p><p>Supports custom server systems. When left empty, debian13 is used by default. Note that the parameter should be system name + version number.</p><p>Except for Alpine systems, all other systems require disk size greater than 6G, otherwise the system won&#39;t start, cannot initialize and function, and will crash during the setup process.</p><h3 id="example" tabindex="-1">Example <a class="header-anchor" href="#example" aria-label="Permalink to &quot;Example&quot;">​</a></h3><p>Here&#39;s the information for the example server being created:</p><table tabindex="0"><thead><tr><th>Property</th><th>Value</th></tr></thead><tbody><tr><td>Server Name</td><td>test</td></tr><tr><td>SSH Login Username</td><td>root</td></tr><tr><td>SSH Login Password</td><td>Randomly generated</td></tr><tr><td>CPU Cores</td><td>1</td></tr><tr><td>Memory Size</td><td>256MB</td></tr><tr><td>Disk Size</td><td>10G</td></tr><tr><td>Internal/External Port Mapping Range</td><td>20002 to 20025</td></tr><tr><td>Upload Bandwidth</td><td>500Mbit</td></tr><tr><td>Download Bandwidth</td><td>500Mbit</td></tr><tr><td>Auto-configure External IPV6</td><td>N</td></tr><tr><td>System</td><td>debian13</td></tr></tbody></table><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">./buildvm.sh</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> test</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 512</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 10</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 20001</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 20002</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 20025</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 500</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 500</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> N</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> debian13</span></span></code></pre></div><p>To enter the virtual machine, execute:</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">incus</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> console</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> test</span></span></code></pre></div><p>To exit, first press and hold <code>Ctrl</code> then press <code>a</code>, release them, then press <code>q</code>.</p><p>To view information, execute:</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">cat</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ServerName</span></span></code></pre></div><p>For example, to query the example&#39;s information:</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">cat</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> test</span></span></code></pre></div><h3 id="delete-test-server" tabindex="-1">Delete Test Server <a class="header-anchor" href="#delete-test-server" aria-label="Permalink to &quot;Delete Test Server&quot;">​</a></h3><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">incus</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> stop</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -f</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> test</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">incus</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> delete</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -f</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> test</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">rm</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -rf</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> test</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">rm</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -rf</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> test_v6</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ls</span></span></code></pre></div>`,31)]))}const u=i(n,[["render",l]]);export{k as __pageData,u as default};

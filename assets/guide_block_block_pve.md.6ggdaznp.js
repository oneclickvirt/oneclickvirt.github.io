import{_ as a,c as e,o as t,ag as i}from"./chunks/framework.CSeR4K32.js";const h=JSON.parse('{"title":"通过设置防火墙限制虚拟机使用的IP避免盗用","description":"","frontmatter":{"outline":"deep"},"headers":[],"relativePath":"guide/block/block_pve.md","filePath":"guide/block/block_pve.md","lastUpdated":1754480658000}'),l={name:"guide/block/block_pve.md"};function p(n,s,o,c,d,r){return t(),e("div",null,s[0]||(s[0]=[i(`<h1 id="通过设置防火墙限制虚拟机使用的ip避免盗用" tabindex="-1">通过设置防火墙限制虚拟机使用的IP避免盗用 <a class="header-anchor" href="#通过设置防火墙限制虚拟机使用的ip避免盗用" aria-label="Permalink to &quot;通过设置防火墙限制虚拟机使用的IP避免盗用&quot;">​</a></h1><p>在PVE的宿主机下创建以下文件</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">/etc/pve/firewall/</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;VMID&gt;.fw</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[IPSET ipfilter-</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">net0</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">xxx.xxx.xxx.xxx</span></span></code></pre></div><p><code>&lt;VMID&gt;</code>替换为虚拟机的VMID数字，<code>&lt;net0&gt;</code>替换为网络设备中对应的别名(一般不用修改，除非你限制的IPV6)，<code>xxx.xxx.xxx.xxx</code>替换为公网IP地址，注意此IP对应前面的网络设备。</p><p>这里的意思是net0只能使用xxx.xxx.xxx.xxx这个IP，如果使用其他的IP数据将会被丢弃，从而达到限制虚拟机只能使用此IP的目的。</p><p>这里可以有多个IP，一旦启用此规则该VM就无法使用除此之外的任何IP，如果你没有写IPv6地址则代表该VM无法使用IPv6地址。</p><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>本设置仅推荐在开设<strong>非NAT全端口映射的独立IP的虚拟机</strong>时使用，否则可能导致奇奇怪怪的问题造成服务器没网。</p></div><p>该方法<strong>不适合</strong>开设任何NAT虚拟机/容器的PVE上使用。</p>`,8)]))}const k=a(l,[["render",p]]);export{h as __pageData,k as default};

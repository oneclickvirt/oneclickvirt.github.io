import{_ as s,v as n,b as a,R as l}from"./chunks/framework.70afa331.js";const d=JSON.parse('{"title":"","description":"","frontmatter":{},"headers":[],"relativePath":"guide/incus/incus_windows.md","filePath":"guide/incus/incus_windows.md","lastUpdated":1747665132000}'),o={name:"guide/incus/incus_windows.md"},p=l(`<h2 id="手动修补进行安装" tabindex="-1">手动修补进行安装 <a class="header-anchor" href="#手动修补进行安装" aria-label="Permalink to &quot;手动修补进行安装&quot;">​</a></h2><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#82AAFF;">cd</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">/root</span></span>
<span class="line"><span style="color:#FFCB6B;">apt</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">install</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">snapd</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-y</span></span>
<span class="line"><span style="color:#FFCB6B;">snap</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">install</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">distrobuilder</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">--classic</span></span>
<span class="line"><span style="color:#FFCB6B;">wget</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">https://down.idc.wiki/ISOS/Windows/Server%202022/zh-cn_windows_server_2022_x64_dvd_6c73507d.iso</span></span>
<span class="line"><span style="color:#FFCB6B;">apt</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">install</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-y</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">libguestfs-tools</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">wimtools</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">rsync</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">libhivex-bin</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">libwin-hivex-perl</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">wimtools</span></span>
<span class="line"><span style="color:#FFCB6B;">apt</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">install</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">genisoimage</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-y</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">||</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">apt</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">install</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">mkisofs</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-y</span></span>
<span class="line"><span style="color:#FFCB6B;">distrobuilder</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">repack-windows</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">--windows-arch=amd64</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">zh-cn_windows_server_2022_x64_dvd_6c73507d.iso</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">zh-cn_windows_server_2022_x64_dvd_6c73507d.incus.iso</span></span>
<span class="line"><span style="color:#FFCB6B;">rm</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-rf</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">zh-cn_windows_server_2022_x64_dvd_6c73507d.iso</span></span></code></pre></div><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">incus</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">info</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">|</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">grep</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-i</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">driver:</span></span></code></pre></div><p>需要看到带有</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">driver: qemu | lxc</span></span></code></pre></div><p>才可开设虚拟机，否则无法开设</p><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">incus</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">init</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">win22vm</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">--empty</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">--vm</span></span>
<span class="line"><span style="color:#FFCB6B;">incus</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">config</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">device</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">override</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">win22vm</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">root</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">size=</span><span style="color:#F78C6C;">30</span><span style="color:#C3E88D;">GiB</span></span>
<span class="line"><span style="color:#FFCB6B;">incus</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">config</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">set</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">win22vm</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">limits.cpu=</span><span style="color:#F78C6C;">3</span></span>
<span class="line"><span style="color:#FFCB6B;">incus</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">config</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">set</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">win22vm</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">limits.memory=</span><span style="color:#F78C6C;">4</span><span style="color:#C3E88D;">GiB</span></span>
<span class="line"><span style="color:#FFCB6B;">incus</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">config</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">device</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">add</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">win22vm</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">vtpm</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">tpm</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">path=/dev/tpm0</span></span>
<span class="line"><span style="color:#FFCB6B;">incus</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">config</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">device</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">add</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">win22vm</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">install</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">disk</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">source=/root/zh-cn_windows_server_2022_x64_dvd_6c73507d.incus.iso</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">boot.priority=</span><span style="color:#F78C6C;">10</span></span>
<span class="line"><span style="color:#FFCB6B;">incus</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">start</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">win22vm</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">--console=vga</span></span>
<span class="line"><span style="color:#FFCB6B;">incus</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">console</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">win22vm</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">--type=vga</span></span>
<span class="line"><span style="color:#FFCB6B;">incus</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">config</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">device</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">remove</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">win22vm</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">install</span></span></code></pre></div><p><a href="https://github.com/novnc/novnc/releases" target="_blank" rel="noreferrer">https://github.com/novnc/novnc/releases</a></p>`,8),e=[p];function c(t,C,r,y,i,A){return n(),a("div",null,e)}const E=s(o,[["render",c]]);export{d as __pageData,E as default};

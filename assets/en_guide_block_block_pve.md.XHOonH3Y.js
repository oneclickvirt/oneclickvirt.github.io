import{_ as t,c as s,o as i,ag as a}from"./chunks/framework.CSeR4K32.js";const u=JSON.parse('{"title":"Avoid theft by setting up a firewall to limit the IPs used by the VMs","description":"","frontmatter":{"outline":"deep"},"headers":[],"relativePath":"en/guide/block/block_pve.md","filePath":"en/guide/block/block_pve.md","lastUpdated":1760660264000}'),n={name:"en/guide/block/block_pve.md"};function l(o,e,h,r,p,d){return i(),s("div",null,e[0]||(e[0]=[a(`<h1 id="avoid-theft-by-setting-up-a-firewall-to-limit-the-ips-used-by-the-vms" tabindex="-1">Avoid theft by setting up a firewall to limit the IPs used by the VMs <a class="header-anchor" href="#avoid-theft-by-setting-up-a-firewall-to-limit-the-ips-used-by-the-vms" aria-label="Permalink to &quot;Avoid theft by setting up a firewall to limit the IPs used by the VMs&quot;">â€‹</a></h1><p>Create the following file under the PVE&#39;s host machine</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">/etc/pve/firewall/</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;VMID&gt;.fw</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[IPSET ipfilter-</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">net0</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">xxx.xxx.xxx.xxx</span></span></code></pre></div><p><code>&lt;VMID&gt;</code> is replaced with the VMID number of the virtual machine, <code>&lt;net0&gt;</code> is replaced with the corresponding alias in the network device (which generally doesn&#39;t need to be changed unless you&#39;re restricted to IPV6), and <code>xxx.xxx.xxx.xxx</code> is replaced with the public IP address, noting that this IP corresponds to the network device in front of it.</p><p>The idea here is that net0 can only use the IP xxx.xxx.xxx.xxx, if you use any other IP the data will be dropped, thus restricting the VM to only use this IP.</p><p>There can be more than one IP, once this rule is enabled the VM can&#39;t use any other IP, if you don&#39;t write an IPv6 address it means the VM can&#39;t use an IPv6 address.</p><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>This setting is only recommended when opening <strong>VMs</strong> with separate IPs that are not NAT full port mapped, otherwise it may cause strange issues resulting in the server being without a network.</p></div><p>This method <strong>is not suitable</strong> for use on PVEs that open any NAT VMs/containers.</p>`,8)]))}const g=t(n,[["render",l]]);export{u as __pageData,g as default};
